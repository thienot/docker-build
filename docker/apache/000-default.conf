<VirtualHost *:80>
    DocumentRoot /var/www/html/public
    ServerName localhost

    SetEnvIf X-Forwarded-Proto https HTTPS=on
    RemoteIPHeader CF-Connecting-IP

    <Directory /var/www/html/public>
        AllowOverride All
        Require all granted
        Options Indexes MultiViews FollowSymLinks
        DirectoryIndex index.php
        <IfModule mod_headers.c>
            Header set Access-Control-Allow-Origin "*"
            Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
            Header set Access-Control-Allow-Headers "DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type"
        </IfModule>
        <FilesMatch "\.(jpg|jpeg|png|gif|ico|css|js|woff2|ttf)$">
            Header set Cache-Control "max-age=31536000, public"
            Header unset ETag
            FileETag None
        </FilesMatch>
    </Directory>

    <LocationMatch "/(admin|login|register)">
        Header set Cache-Control "private, no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "0"
    </LocationMatch>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
